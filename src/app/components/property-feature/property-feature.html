<!-- Filtros Horizontais -->
<div class="mb-8">
  <div class="flex flex-wrap gap-3 items-center">
    <!-- Localização -->
    <div class="flex-1 min-w-[200px]">
      <input
        type="text"
        [(ngModel)]="location"
        (ngModelChange)="onLocationChange()"
        placeholder="{{'HOME.FILTER.LOCATION' | translate}}"
        [attr.aria-label]="'HOME.FILTER.LOCATION' | translate"
        class="w-full rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-900 px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary focus:border-primary"
      />
    </div>

    <!-- Finalidade -->
    <div class="min-w-[150px]">
      <select
        [(ngModel)]="selectedPurpose"
        (ngModelChange)="onFilterChange()"
        [attr.aria-label]="'HOME.FILTER.ALL_PURPOSES' | translate"
        [attr.title]="'HOME.FILTER.ALL_PURPOSES' | translate"
        class="w-full rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-900 px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary focus:border-primary"
      >
        <option value="">{{'HOME.FILTER.ALL_PURPOSES' | translate}}</option>
        <option value="sale">{{'FILTER.PURPOSE.SALE' | translate}}</option>
        <option value="rent">{{'FILTER.PURPOSE.RENT' | translate}}</option>
        <option value="exchange">{{'FILTER.PURPOSE.EXCHANGE' | translate}}</option>
      </select>
    </div>

    <!-- Tipo -->
    <div class="min-w-[150px]">
      <select
        [(ngModel)]="selectedPropertyType"
        (ngModelChange)="onFilterChange()"
        [attr.aria-label]="'HOME.FILTER.ALL_TYPES' | translate"
        [attr.title]="'HOME.FILTER.ALL_TYPES' | translate"
        class="w-full rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-900 px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary focus:border-primary"
      >
        <option value="">{{'HOME.FILTER.ALL_TYPES' | translate}}</option>
        <option value="house">{{'FILTER.PROPERTY_TYPE.HOUSE' | translate}}</option>
        <option value="apartment">{{'FILTER.PROPERTY_TYPE.APARTMENT' | translate}}</option>
        <option value="land">{{'FILTER.PROPERTY_TYPE.LAND' | translate}}</option>
      </select>
    </div>

    <!-- Área -->
    <div class="min-w-[120px]">
      <input
        type="number"
        [(ngModel)]="minArea"
        (ngModelChange)="onFilterChange()"
        placeholder="{{'HOME.FILTER.MIN_AREA' | translate}}"
        [attr.aria-label]="'HOME.FILTER.MIN_AREA' | translate"
        class="w-full rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-900 px-4 py-2.5 text-sm focus:ring-2 focus:ring-primary focus:border-primary"
      />
    </div>

    <!-- Botões -->
    <button
      (click)="onSearch()"
      class="btn bg-primary hover:bg-primary-dark text-white rounded-full px-6 py-2.5 text-sm font-medium"
    >
      {{'COMMON.SEARCH' | translate}}
    </button>

    <button
      (click)="clearFilters()"
      class="btn border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-800 rounded-full px-6 py-2.5 text-sm font-medium"
    >
      {{'HOME.FILTER.CLEAR' | translate}}
    </button>
  </div>
</div>

<!-- Loading State -->
@if (isLoading) {
  <div class="flex justify-center items-center py-12">
    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>
  </div>
}

<!-- Grid de Propriedades -->
@if (!isLoading) {
  <div class="grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-[30px]">
    @for (item of properties; track item.id) {
      <app-property-card [property]="item"></app-property-card>
    }
  </div>

  @if (properties.length === 0) {
    <div class="text-center py-12">
      <p class="text-slate-400 text-lg">{{'COMMON.NO_RESULTS' | translate}}</p>
    </div>
  }
}
