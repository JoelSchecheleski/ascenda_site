<app-navbar [childMessage]="'true'" [navLight]="true"/>

<section class="relative table w-full py-32 lg:py-36 bg-[url('/assets/images/bg/01.jpg')] bg-no-repeat bg-center bg-cover">
    <div class="absolute inset-0 bg-slate-900/80"></div>
    <div class="container relative">
        <div class="grid grid-cols-1 text-center mt-10">
            <h3 class="md:text-4xl text-3xl md:leading-normal leading-normal font-medium text-white">{{'BUY.TITLE' | translate}}</h3>
        </div>
    </div>
</section>

<div class="relative">
    <div class="shape overflow-hidden z-1 text-white dark:text-slate-900">
        <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z" fill="currentColor"></path>
        </svg>
    </div>
</div>

<div class="container relative -mt-[25px]">
    <div class="grid grid-cols-1">
        <div class="subcribe-form z-1">
            <form class="relative max-w-2xl mx-auto" (submit)="onSearch($event)">
                <label for="search_name" class="sr-only">{{'BUY.SEARCH_PLACEHOLDER' | translate}}</label>
                <i data-feather="search" class="size-5 absolute top-[47%] -translate-y-1/2 start-4"></i>
                <input
                    type="text"
                    id="search_name"
                    name="name"
                    [(ngModel)]="searchTerm"
                    class="rounded-md bg-white dark:bg-slate-900 shadow-sm dark:shadow-gray-700 !ps-12"
                    [placeholder]="'BUY.SEARCH_PLACEHOLDER' | translate"
                    [attr.aria-label]="'BUY.SEARCH_PLACEHOLDER' | translate">
                <button type="submit" class="btn bg-primary hover:bg-primary-dark text-white rounded-md">{{'BUY.SEARCH_BUTTON' | translate}}</button>
            </form>
        </div>
    </div>
</div>

<section class="relative lg:pb-24 pb-16">

    <div id="properties-section" class="container relative lg:mt-24 mt-16">
        <!-- <div class="grid grid-cols-1 pb-8 text-center">
            <h3 class="mb-4 md:text-3xl md:leading-normal text-2xl leading-normal font-semibold">{{'LISTING.FEATURED_PROPERTIES' | translate}}</h3>
            <p class="text-slate-400 max-w-xl mx-auto">{{'BUY.BUYER_BENEFITS_DESC' | translate}}</p>
        </div> -->

        <!-- Loading State -->
        @if (isLoading) {
            <div class="flex justify-center items-center py-20">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
            </div>
        }

        <!-- Error State -->
        @if (errorMessage && !isLoading) {
            <div class="bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-lg mt-8 max-w-2xl mx-auto">
                <p>{{ errorMessage }}</p>
            </div>
        }

        <!-- Properties Grid -->
        @if (!isLoading && !errorMessage) {
            @if (properties.length > 0) {
                <div class="grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 mt-8 gap-[30px]">
                    @for (item of properties; track item.id) {
                        <app-property-card [property]="item"></app-property-card>
                    }
                </div>

                <!-- Paginação -->
                <div class="grid md:grid-cols-12 grid-cols-1 mt-8">
                    <div class="md:col-span-12 text-center">
                        <nav>
                            <ul class="inline-flex items-center -space-x-px">
                                <!-- Botão Anterior -->
                                <li>
                                    <button
                                        (click)="previousPage()"
                                        [disabled]="!hasPreviousPage()"
                                        [class.opacity-50]="!hasPreviousPage()"
                                        [class.cursor-not-allowed]="!hasPreviousPage()"
                                        title="Página anterior"
                                        class="size-10 inline-flex justify-center items-center mx-1 !rounded-full text-slate-400 bg-white dark:bg-slate-900 hover:text-white shadow-xs shadow-gyay-200 dark:shadow-gray-700 hover:border-primary dark:hover:border-primary hover:bg-primary dark:hover:bg-primary"
                                    >
                                        <i class="uil uil-angle-left text-[20px]"></i>
                                    </button>
                                </li>

                                <!-- Indicador de Página -->
                                <li>
                                    <span class="size-10 inline-flex justify-center items-center mx-1 !rounded-full text-white bg-primary shadow-xs shadow-gyay-200 dark:shadow-gray-700">
                                        {{currentPage}}
                                    </span>
                                </li>

                                <li class="px-2 text-slate-400">
                                    de {{getTotalPages()}}
                                </li>

                                <!-- Botão Próximo -->
                                <li>
                                    <button
                                        (click)="nextPage()"
                                        [disabled]="!hasNextPage()"
                                        [class.opacity-50]="!hasNextPage()"
                                        [class.cursor-not-allowed]="!hasNextPage()"
                                        title="Próxima página"
                                        class="size-10 inline-flex justify-center items-center mx-1 !rounded-full text-slate-400 bg-white dark:bg-slate-900 hover:text-white shadow-xs shadow-gyay-200 dark:shadow-gray-700 hover:border-primary dark:hover:border-primary hover:bg-primary dark:hover:bg-primary"
                                    >
                                        <i class="uil uil-angle-right text-[20px]"></i>
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            } @else {
                <div class="text-center py-20">
                    <p class="text-slate-400 text-lg">Nenhuma propriedade para compra encontrada.</p>
                </div>
            }
        }
    </div>

    <div class="container relative lg:mt-24 mt-16">
        <!-- <div class="grid grid-cols-1 pb-8 text-center">
            <h3 class="mb-4 md:text-3xl md:leading-normal text-2xl leading-normal font-semibold">{{'BUY.BUYER_BENEFITS' | translate}}</h3>
            <p class="text-slate-400 max-w-xl mx-auto">{{'BUY.BUYER_BENEFITS_DESC' | translate}}</p>
        </div>        <!-- <div class="grid grid-cols-1 pb-8 text-center">
            <h3 class="mb-4 md:text-3xl md:leading-normal text-2xl leading-normal font-semibold">{{'BUY.BUYER_BENEFITS' | translate}}</h3>
            <p class="text-slate-400 max-w-xl mx-auto">{{'BUY.BUYER_BENEFITS_DESC' | translate}}</p>
        </div> -->

        <!-- <div class="grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 mt-8 gap-[30px]">
            <div *ngFor="let item of benefitsData" class="group relative lg:px-10 transition-all duration-500 ease-in-out rounded-xl bg-transparent overflow-hidden text-center">
                <div class="relative overflow-hidden text-transparent -m-3">
                    <i data-feather="hexagon" class="size-32 fill-primary/5 mx-auto"></i>
                    <div class="absolute top-2/4 -translate-y-2/4 start-0 end-0 mx-auto text-primary rounded-xl transition-all duration-500 ease-in-out text-4xl flex align-middle justify-center items-center">
                        <i class={{item.icon}}></i>
                    </div>
                </div>

                <div class="mt-6">
                    <h5 class="text-xl font-medium">{{item.title}}</h5>
                    <p class="text-slate-400 mt-3">{{item.desc}}</p>
                </div>
            </div>

        </div> -->
    </div>

    <div class="container relative lg:mt-24 mt-16">
        <div class="grid md:grid-cols-12 grid-cols-1 gap-[30px]">
            <div class="lg:col-span-4 md:col-span-5">
                <div class="sticky top-20">
                    <ul class="flex-column text-center p-6 bg-white dark:bg-slate-900 shadow-sm shadow-gyay-200 dark:shadow-gray-700 rounded-md">
                        <li role="presentation">
                            <button class="px-4 py-2 text-base font-medium rounded-md w-full transition-all duration-500 ease-in-out hover:text-primary dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-800" [ngClass]="activeIndex=== 1 ? 'text-white bg-primary hover:text-white hover:bg-primary' : '' " (click)="TabClick(1)">{{'BUY.PRE_APPROVAL' | translate}}</button>
                        </li>
                        <li role="presentation">
                            <button class="px-4 py-2 text-base font-medium rounded-md w-full transition-all duration-500 ease-in-out hover:text-primary dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-800 mt-3" [ngClass]="activeIndex=== 2 ? 'text-white bg-primary hover:text-white hover:bg-primary' : '' " (click)="TabClick(2)">{{'BUY.SCHEDULE_SHOWING' | translate}}</button>
                        </li>
                        <li role="presentation">
                            <button class="px-4 py-2 text-base font-medium rounded-md w-full transition-all duration-500 ease-in-out hover:text-primary dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-800 mt-3" [ngClass]="activeIndex=== 3 ? 'text-white bg-primary hover:text-white hover:bg-primary' : '' " (click)="TabClick(3)">{{'BUY.SUBMIT_OFFER' | translate}}</button>
                        </li>
                        <li role="presentation">
                            <button class="px-4 py-2 text-base font-medium rounded-md w-full transition-all duration-500 ease-in-out hover:text-primary dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-800 mt-3" [ngClass]="activeIndex=== 4 ? 'text-white bg-primary hover:text-white hover:bg-primary' : '' " (click)="TabClick(4)">{{'BUY.PROPERTY_INSPECTION' | translate}}</button>
                        </li>
                        <li role="presentation">
                            <button class="px-4 py-2 text-base font-medium rounded-md w-full transition-all duration-500 ease-in-out hover:text-primary dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-800 mt-3" [ngClass]="activeIndex=== 5 ? 'text-white bg-primary hover:text-white hover:bg-primary' : '' " (click)="TabClick(5)">{{'BUY.APPRAISAL' | translate}}</button>
                        </li>
                        <li role="presentation">
                            <button class="px-4 py-2 text-base font-medium rounded-md w-full transition-all duration-500 ease-in-out hover:text-primary dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-800 mt-3" [ngClass]="activeIndex=== 6 ? 'text-white bg-primary hover:text-white hover:bg-primary' : '' " (click)="TabClick(6)">{{'BUY.CLOSING_DEAL' | translate}}</button>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="lg:col-span-8 md:col-span-7">
                <div>
                    <div *ngIf="activeIndex === 1">
                        <img [src]="'/assets/images/svg/Agent_Monochromatic.svg'" alt="">
                        <div class="mt-6">
                            <h5 class="font-medium text-xl">{{'BUY.STEPS.PRE_APPROVAL.TITLE' | translate}}</h5>
                            <p class="text-slate-400 mt-3">{{'BUY.STEPS.PRE_APPROVAL.DESC' | translate}}</p>
                        </div>
                    </div>
                    <div *ngIf="activeIndex === 2">
                        <img [src]="'/assets/images/svg/presentation_Flatline.svg'" alt="">
                        <div class="mt-6">
                            <h5 class="font-medium text-xl">{{'BUY.STEPS.SCHEDULE_SHOWING.TITLE' | translate}}</h5>
                            <p class="text-slate-400 mt-3">{{'BUY.STEPS.SCHEDULE_SHOWING.DESC' | translate}}</p>
                        </div>
                    </div>
                    <div *ngIf="activeIndex === 3">
                        <img [src]="'/assets/images/svg/session_Flatline.svg'" alt="">
                        <div class="mt-6">
                            <h5 class="font-medium text-xl">{{'BUY.STEPS.SUBMIT_OFFER.TITLE' | translate}}</h5>
                            <p class="text-slate-400 mt-3">{{'BUY.STEPS.SUBMIT_OFFER.DESC' | translate}}</p>
                        </div>
                    </div>
                    <div *ngIf="activeIndex === 4">
                        <img [src]="'/assets/images/svg/Startup_Flatline.svg'" alt="">
                        <div class="mt-6">
                            <h5 class="font-medium text-xl">{{'BUY.STEPS.PROPERTY_INSPECTION.TITLE' | translate}}</h5>
                            <p class="text-slate-400 mt-3">{{'BUY.STEPS.PROPERTY_INSPECTION.DESC' | translate}}</p>
                        </div>
                    </div>
                    <div *ngIf="activeIndex === 5">
                        <img [src]="'/assets/images/svg/team_Flatline.svg'" alt="">
                        <div class="mt-6">
                            <h5 class="font-medium text-xl">{{'BUY.STEPS.APPRAISAL.TITLE' | translate}}</h5>
                            <p class="text-slate-400 mt-3">{{'BUY.STEPS.APPRAISAL.DESC' | translate}}</p>
                        </div>
                    </div>
                    <div *ngIf="activeIndex === 6">
                        <img [src]="'/assets/images/svg/Team_meeting_Two.svg'" alt="">
                        <div class="mt-6">
                            <h5 class="font-medium text-xl">{{'BUY.STEPS.CLOSING_DEAL.TITLE' | translate}}</h5>
                            <p class="text-slate-400 mt-3">{{'BUY.STEPS.CLOSING_DEAL.DESC' | translate}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

   <app-get-in-touch/>

</section>
<app-footer/>
